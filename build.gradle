apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'maven'
apply plugin: 'groovy'

group 'webui'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    maven { url "http://repo.maven.apache.org/maven2" }
    maven { url "https://plugins.gradle.org/m2/" }
    mavenCentral()
    jcenter()
}


buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
    dependencies {
//        classpath "io.qameta.allure:allure-gradle:2.5"
//        classpath "org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.6.2"
    }
}

sourceSets {
    main {
        java {
            srcDir 'src/main/java'
        }
    }
    test {
        java.srcDir file('src/test/java')
        resources.srcDir file('scr/test/resource')
        compileClasspath = sourceSets.main.output + configurations.testRuntime
        runtimeClasspath = output + compileClasspath
    }
}


dependencies {
    compile group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '3.141.59'
    compile group: 'org.seleniumhq.selenium', name: 'selenium-server', version: '3.141.59'
    compile group: 'org.seleniumhq.selenium', name: 'selenium-chrome-driver', version: '3.141.59'
    compile group: 'org.seleniumhq.selenium', name: 'selenium-firefox-driver', version: '3.141.59'
    compile group: 'org.seleniumhq.selenium', name: 'selenium-remote-driver', version: '3.141.59'
    compile group: 'org.seleniumhq.selenium', name: 'selenium-ie-driver', version: '3.141.59'
    compile group: 'org.seleniumhq.selenium', name: 'selenium-edge-driver', version: '3.141.59'
    compile group: 'com.amazonaws', name: 'aws-java-sdk-s3', version: '1.11.482'
    compile group: 'net.reini', name: 'slf4-cdi', version: '1.0'
    compile group: 'org.assertj', name: 'assertj-core', version: '3.11.0'
    compile group: 'org.hamcrest', name: 'hamcrest-all', version: '1.3'
    compile group: 'org.testng', name: 'testng', version: '6.14.3'
    compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1.1'
//    compile group: 'com.relevantcodes', name: 'extentreports', version: '2.41.2'
    compile group: 'commons-io', name: 'commons-io', version: '2.6'
    compile group: 'com.aventstack', name: 'extentreports', version: '4.0.6'
    compile group: 'net.sourceforge.javacsv', name: 'javacsv', version: '2.0'
    compile group: 'org.apache.poi', name: 'poi-ooxml', version: '3.16'
    compile group: 'org.apache.poi', name: 'poi-ooxml-schemas', version: '3.16'
    compile group: 'org.apache.poi', name: 'poi-excelant', version: '3.16'
    compile group: 'org.apache.poi', name: 'poi-examples', version: '3.16'
    compile group: 'org.apache.poi', name: 'poi-scratchpad', version: '3.16'
    compile group: 'org.apache.poi', name: 'poi', version: '3.16'
    compile group: 'org.apache.xmlbeans', name: 'xmlbeans', version: '2.6.0'
    compile group: 'com.microsoft.sqlserver', name: 'mssql-jdbc', version: '6.4.0.jre8'
    compile group: 'org.slf4j', name: 'slf4j-log4j12', version: '1.7.25'
    compile group: 'com.github.javafaker', name: 'javafaker', version: '0.15'
    compile group: 'io.rest-assured', name: 'rest-assured', version: '3.3.0'
    compile 'io.rest-assured:json-path:3.3.0'
    compile 'io.rest-assured:json-schema-validator:3.3.0'
    compile group: 'org.json', name: 'json', version: '20180130'
    compile group: 'com.mashape.unirest', name: 'unirest-java', version: '1.4.9'
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.11.1'
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.11.1'
    compile group: 'com.mashape.unirest', name: 'unirest-java', version: '1.4.9'
    compile group: 'com.github.tomakehurst', name: 'wiremock', version: '2.19.0'
    compile group: 'net.lightbody.bmp', name: 'browsermob-core', version: '2.1.5'
    compile group: 'org.zaproxy', name: 'zap-clientapi', version: '1.6.0'
    compile group: 'net.lingala.zip4j', name: 'zip4j', version: '1.3.2'
}

task E2E(type: Test) {
    useTestNG() {
        outputDirectory = file("$project.buildDir/testngOutput")
        useDefaultListeners = true
        suiteXmlFiles << new File("src/test/java/suite/testng.xml")
        setSuiteXmlFiles(suiteXmlFiles)
    }
    testLogging {
        exceptionFormat "full"
        events "started", "passed", "skipped", "failed", "standardOut", "standardError"
        minGranularity 0
    }
    reports {
        junitXml.enabled = false
        html.enabled = true
    }
}
